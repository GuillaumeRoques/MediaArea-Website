{% trans_default_domain 'FOSUserBundle' %}

<div class="fos_user_user_show">
    {% if user.realusername %}
        <p>{{ 'profile.show.username'|trans }}: {{ user.username }}</p>
    {% endif %}
    <p>{{ 'profile.show.email'|trans }}: {{ user.email }}</p>
    {% if user.name %}<p>Name: {{ user.name }}</p>{% endif %}
    {% if country %}<p>Country: {{ country }}</p>{% endif %}
    {% if language %}<p>Language: {{ language }}</p>{% endif %}
    <p>Professional: {% if user.professional %}Yes{% elseif false is same as(user.professional) %}No{% else %}Not specified{% endif %}</p>
    {% if user.companyName %}<p>Company name: {{ user.companyName }}</p>{% endif %}
    <p>Newsletter: {% if user.newsletter %}Yes{% else %}No{% endif %}</p>
    {% if user.vote %}<p>Voting points: {{ user.vote }} (voting points manager will be available at the beginning of 2018)</p>{% endif %}
    {% if user.endDate %}<p>Membership end date: {{ user.endDate|date_modify('-1 day')|date('Y-m-d') }}</p>{% endif %}
</div>

{% if invoices %}
    <div class="profile-show-invoices">
        Your invoices:<br>
        <ul>
            {% for invoice in invoices  %}
                <li><a href="" data-toggle="modal" data-target="#invoiceModal" data-invoice-id="{{ invoice.id }}">{{ (invoice.amount + invoice.vat)}} {{ invoice.currency }} on {{ invoice.date|date('F jS Y') }}</a></li>
            {% endfor %}
        </ul>
    </div>
{% endif %}

<div class="fos_user_user_actions">
    <p><a href="{{ path('fos_user_profile_edit') }}">Edit your profile</a></p>
    <p><a href="{{ path('fos_user_change_password') }}">Change your password</a></p>
</div>

<div class="modal fade" id="invoiceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Invoice</h4>
            </div>
            <div class="modal-body">
                <div class="modal-invoice-success">
                    {{ include('@Payment/Invoice/invoice_content.html.twig') }}
                </div>
                <div class="modal-invoice-error hidden">
                    <div class="alert alert-danger">
                        An error occured, please try again later. <a href="mailto:info@mediaarea.net">Contact us</a> if the problem persists.
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-dld">Download</button>
                <button type="button" class="btn btn-primary btn-print">Print</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
